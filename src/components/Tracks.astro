---
// src/components/Tracks.astro

// 1. Component Imports
import Button from "components/Button.astro"

// 2. Component Props Interface
interface Props {
    id?: string,
    title: string,
    tracksTitle?: string,
    workshopsTitle?: string,
    tracks?: Array<{
        title: string,
        text: string,
    }>,
    // MODIFIED: Workshops now accept a title and text, just like tracks.
    workshops?: Array<{
        title: string,
        text: string,
    }>,
    ctaButton: {
        text: string,
        link: string,
    }
}

// 3. Get props
const {
    id = "none",
    title,
    tracksTitle = "Tracks",
    workshopsTitle = "Workshops",
    tracks,
    workshops,
    ctaButton
} = Astro.props;
---

<!-- 4. Component Template (HTML) -->
<section
    class="section section-agenda-grid"
    id={id}
    data-theme-section="light"
    data-bg-section="light"
    data-scroll-section
>
    <div class="container">
        <!-- Main Title -->
        <div class="row">
            <div class="col col-title">
                <h2>{title}</h2>
            </div>
        </div>

        <!-- Grid for Tracks and Workshops -->
        <div class="tracks-workshops-grid">

            <!-- Tracks Column -->
            <div class="tracks-col">
                <h3>{tracksTitle}</h3>
                <ul class="row row-list accordion visible">
                    {tracks?.map((loop, i) => (
                        <li
                            class="single-agenda-card single-accordion-item card-hover"
                            data-accordion-status="not-active"
                        >
                            <div class="top" data-accordion-toggle>
                                <div class="left">
                                    <div class="timeslot">
                                        <p class="h5">{(i + 1).toString().padStart(3, '0')}</p>
                                    </div>
                                    <h3 class="h4">{loop.title}</h3>
                                </div>
                                <div class="plus">
                                    <div class="plus-fill"></div>
                                    <div class="bar bar-top"></div>
                                    <div class="bar bar-bottom"></div>
                                </div>
                            </div>
                            <div class="bottom">
                                <div class="bottom-wrap">
                                    <div class="bottom-content">
                                        <div class="card-row styled-content">
                                            <p>{loop.text ?? 'Description not available.'}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    ))}
                </ul>
            </div>

            <!-- Workshops Column -->
            <div class="workshops-col">
                <h3>{workshopsTitle}</h3>
                <ul class="row row-list accordion visible">
                    {workshops?.map((loop, i) => (
                        <li
                            class="single-agenda-card is-workshop single-accordion-item card-hover"
                            data-accordion-status="not-active"
                        >
                            <div class="top" data-accordion-toggle>
                                <div class="left">
                                    <div class="timeslot">
                                        <p class="h5">{(i + 1).toString().padStart(3, '0')}</p>
                                    </div>
                                    {/* MODIFIED: Changed from loop.name to loop.title */}
                                    <h3 class="h4">{loop.title}</h3>
                                </div>
                                <div class="plus">
                                    <div class="plus-fill"></div>
                                    <div class="bar bar-top"></div>
                                    <div class="bar bar-bottom"></div>
                                </div>
                            </div>
                            <div class="bottom">
                                <div class="bottom-wrap">
                                    <div class="bottom-content">
                                        <div class="card-row styled-content">
                                            {/* MODIFIED: Displaying dynamic text instead of a static message */}
                                            <p>{loop.text ?? 'Description not available.'}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    ))}
                </ul>
            </div>
        </div>

        <!-- Call to Action Button -->
        <div class="row row-custom">
            <div class="col">
                <Button
                    text={ctaButton.text}
                    link={ctaButton.link}
                    class="btn outline btn-hover xl"
                />
            </div>
        </div>
    </div>
</section>

<!-- 5. Component Styles -->
<style>
    .col-title {
        margin-bottom: 2.5rem;
    }

    .tracks-workshops-grid h3 {
        margin-bottom: 1.5rem;
    }

    .tracks-workshops-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
    }

    .single-agenda-card .top {
        display: flex;
        align-items: center;
        justify-content: space-between;
    }

    .single-agenda-card .left {
        display: flex;
        align-items: center;
        gap: 1rem;
    }

    .single-agenda-card .h4 {
        margin: 0;
    }

    .single-agenda-card.is-workshop {
        background-color: #f0f5ff;
    }

    @media (max-width: 768px) {
        .tracks-workshops-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
